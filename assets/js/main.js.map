{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/web-manager/lib/utilities.js","webpack:///./assets/_src/js/master/main.js","webpack:///./node_modules/web-manager/index.js","webpack:///./node_modules/web-manager/lib/ajax.js","webpack:///./node_modules/web-manager/lib/dom.js","webpack:///./node_modules/web-manager/lib/query.js","webpack:///./node_modules/web-manager/lib/storage.js","webpack:///./assets/_src/js/app/app.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","4","__webpack_require__","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","s","Utilities","utilObj","this","utilities","obj","path","def","replace","split","filter","Boolean","every","step","set","reduce","a","Math","abs","pop","clipboardCopy","input","el","nodeType","innerHTML","body","select","execCommand","alert","removeChild","Manager","init","Configuration","log","dom","formIdCount","formData","on","preventDefault","id","idSelector","setDisabled","pass","errorElement","getElementsByClassName","setError","errorSelector","show","setInnerHTML","hide","status","btn","removeAttribute","each","elSelected","getAttribute","required","getValue","valToCheck","ajax","method","url","success","response","location","href","encodeURIComponent","query","storage","iev","match","exec","navigator","userAgent","parseInt","ieVersion","properties","options","page","global","code","ready","initilizing","authReady","masterSWRegistered","DOMContentLoaded","eventHandlersSet","queryString","exists","libErrors","isSupportedBrowser","version","cacheBreaker","brand","auth","user","references","serviceWorker","meta","environment","_authStateHandler","This","isAnonymous","didSignUp","domLib","libraries","firebase_app","config","projectId","email","uid","newsletterSignUp","affiliateCode","always","_authHandle_in_normal","_authHandle_in","_authHandle_out","returnUrl","decodeURIComponent","state","tagName","setValue","sends","prohibited","getUrl","setEventListeners","matches","signIn","signUp","signOut","forgot","load_tawk","notifications","subscribe","catch","fn","retryInterval","waitFor","cur","val","condition","performance","mark","SWAvailable","swref","active","controller","postMessage","args","arguments","messageChannel","MessageChannel","port1","onmessage","port2","configuration","callback","initializing","test","cb","featuresDefault","Element","Array","JSON","querySelectorAll","querySelector","IntersectionObserverEntry","loadScript","init_loadPolyfills","tempUrl","options_defaults","saveToStorage","pushNotifications","autoRequest","initChecks","features","popup","enabled","title","btn_ok","text","link","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","appId","firebase_firestore","firebase_messaging","firebase_auth","lazysizes","sentry","dsn","release","tawk","chatId","prechatColor","cookieconsent","palette","background","button","theme","position","showLink","content","dismiss","options_user","postCrucial","firebase","onAuthStateChanged","box","style","display","insertBefore","firstChild","tawkOps","css","load_lazysizes","load_cookieconsent","messaging","swaddress","register","stringify","env","v","then","registration","useServiceWorker","onTokenRefresh","isSubscribed","result","handleTokenRefresh","onMessage","payload","Notification","notification","subscriptionManager","eachRecursive","parent","isArray","t_globalItem","t_pageItem","checkDOMContentLoaded","load_sentry","load_firebase","configureScope","Sentry","scope","captureException","firebaseActive","erel","_displayError","msg","_preDisplayError","signinButtonDisabled","signupButtonDisabled","forgotButtonDisabled","isAuthenticated","currentUser","getUser","defaultUser","password","signInWithEmailAndPassword","credential","passwordConfirm","termEl","createUserWithEmailAndPassword","sendPasswordResetEmail","supported","permission","getToken","token","localSubscription","localHash","userHash","currentDate","Date","dateDifference","getTime","lastSynced","timestamp","toISOString","timestampUNIX","floor","subscriptionRef","firestore","doc","saveLocal","saveServer","dateSubscribed","lastLinked","pk","tags","merge","app","initializeApp","load_firebase_auth","load_firebase_firestore","load_firebase_messaging","expand","max","min","documentElement","clientWidth","clientHeight","lazySizesConfig","loadMode","expFactor","initialise","Tawk_API","Tawk_LoadStart","onLoad","maximize","crossorigin","unshift","splice","apply","warn","Ajax","reqObj","toUpperCase","contentType","accept","methods","XMLHttpRequest","ActiveXObject","open","setRequestHeader","onreadystatechange","req","readyState","parse","responseText","statusText","indexOf","send","atomXHR","Dom","elObj","elements","validate","element","addClass","elsObj","assign","count","list","classList","add","removeClass","remove","ops","keys","visibility","returnType","checked","html","evt","addEventListener","attachEvent","index","async","win","done","top","root","modern","rem","pre","poll","doScroll","frameElement","selector","elems","array","_forEach","Query","queryObj","constructed","original","urlPlain","parameters","constructQueryString","removeAll","getAll","decode","t_params","queries","temp","params","getParameters","Storage","storageObj","localStorage","getItem","existing","setItem","clear"],"mappings":"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","file":"main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t4: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({\"0\":\"vendors~firebase-app~firebase-auth~firebase-firestore~firebase-messaging\",\"1\":\"cookieconsent\",\"2\":\"firebase-app\",\"3\":\"lazysizes\",\"5\":\"vendors~@sentry/browser\",\"6\":\"vendors~firebase-auth\",\"7\":\"vendors~firebase-firestore\",\"8\":\"vendors~firebase-messaging\"}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/js/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/*\n*/\n\nfunction Utilities(utilObj) {\n  this.utilities = utilObj;\n}\n\n/* https://gist.github.com/jeneg/9767afdcca45601ea44930ea03e0febf */\nUtilities.get = function(obj, path, def) {\n  var fullPath = (path || '')\n    .replace(/\\[/g, '.')\n    .replace(/]/g, '')\n    .split('.')\n    .filter(Boolean);\n\n  return fullPath.every(everyFunc) ? obj : def;\n\n  function everyFunc(step) {\n    // return !(step && (obj = obj[step]) === undefined);\n    // console.log(' CHECK > ', !(step && (obj = obj[step]) === undefined));\n    // console.log('step', step, 'obj', obj, 'objstep', obj[step]);\n    // return !(step && (obj = obj[step]) === undefined);\n    return !(step && (obj = obj[step]) === undefined);\n  }\n}\n\n/* https://stackoverflow.com/questions/54733539/javascript-implementation-of-lodash-set-method */\nUtilities.set = function(obj, path, value) {\n  if (Object(obj) !== obj) {\n    return obj;\n  }; // When obj is not an object\n\n  var p = (path || '').split(\".\"); // Get the keys from the path\n\n  p.slice(0, -1).reduce(function (a, c, i) {\n    return (// Iterate all of them except the last one\n      Object(a[c]) === a[c] // Does the key exist and is its value an object?\n      // Yes: then follow that path\n      ? a[c] // No: create the key. Is the next key a potential array-index?\n      : a[c] = Math.abs(p[i + 1]) >> 0 === +p[i + 1] ? [] // Yes: assign a new array object\n      : {}\n    );\n  }, // No: assign a new plain object\n  obj)[p.pop()] = value; // Finally assign the value to the last key\n\n  return obj; // Return the top-level object to allow chaining\n}\n\n// https://dzone.com/articles/cross-browser-javascript-copy-and-paste\n// https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f\nUtilities.clipboardCopy = function(input) {\n  var el = document.createElement('textarea');\n  el.setAttribute('style','width:1px;border:0;opacity:0;');\n  el.value = input && input.nodeType ? input.innerHTML : input;\n  document.body.appendChild(el);\n  el.select();\n  try {\n    document.execCommand('copy');\n  } catch (e) {\n    alert('Please press Ctrl/Cmd+C to copy');\n  }\n  document.body.removeChild(el);\n}\n\nmodule.exports = Utilities;\n","Manager = new (require('web-manager'));\n// Manager = new (require('/Users/ianwiedenman/Documents/GitHub/ITW-Creative-Works/web-manager'));\n\nManager.init(Configuration, function() {\n  Manager.log('Init main.js');\n  var app = require('../app/app.js');\n\n  var dom = Manager.dom();\n\n  var formIdCount = 0;\n  var formData = {};\n\n  dom.select('form.slapform').on('submit', function (e) {\n    e.preventDefault();\n    e.target.id = e.target.id || 'slapform-' + formIdCount++;\n    var idSelector = '#' + e.target.id;\n    setDisabled(true);\n    var checkboxNames = [];\n    var errorElement = e.target.getElementsByClassName('slapform-validation-error')[0];\n    var pass;\n    dom.select(idSelector + ' input, ' + idSelector + ' select, ' + idSelector + ' textarea').each(function (i, el) {\n      var elSelected = dom.select(el);\n      var type = elSelected.getAttribute('type');\n\n      var name = elSelected.getAttribute('name');\n      var required = elSelected.getAttribute('required');\n      required = !(required == null);\n      formData[name] = (type == 'checkbox' || type == 'radio')\n      ? dom.select(idSelector + ' ' + '*[name=\\'' + name + '\\']').getValue()\n      : elSelected.getValue();\n      var valToCheck = (type == 'checkbox') ? (formData[name] || [])[0] : formData[name];\n      pass = (!required || (required && !!valToCheck));\n      console.log(name, formData[name], 'required = ' + required, 'pass = ' + pass);\n      if (!pass) {\n        setError('Please fill out all of the required fields.');\n        return false;\n      }\n    });\n    if (pass) {\n      Manager.ajax().request({\n        method: 'POST',\n        url: dom.select(idSelector).getAttribute('action'),\n        data: formData,\n      })\n      .success(function (response, status, data) { // This function runs only on success\n        Manager.log('SUCCESS', response, status, data);\n        setError();\n        window.location.href = 'https://slapform.com/submission?meta=' + encodeURIComponent('{\"status\":\"success\",\"referrer\":\"' + (formData['slap_redirect'] || window.location.href) + '\"}');\n      })\n      .error(function (response, status, error) { // This function runs only on error\n        Manager.log('FAIL', error);\n        setError(error);\n        setDisabled(false);\n      });\n    } else {\n      setDisabled(false);\n    }\n    Manager.log(formData);\n    function setError(error) {\n      var errorSelector = dom.select(errorElement);\n      if (error) {\n        errorSelector.show().setInnerHTML(error);\n      } else {\n        errorSelector.hide();\n      }\n    }\n    function setDisabled(status) {\n      Manager.log('setting disalbed = ', status);\n      var btn = dom.select(idSelector + ' button[type=\\'submit\\']');\n      if (status) {\n        btn.setAttribute('disabled', status);\n      } else {\n        btn.removeAttribute('disabled');\n      }\n    }\n  });\n});\n","/*\nhttps://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events\nhttps://gomakethings.com/listening-for-click-events-with-vanilla-javascript/\n\nJQUERY Ready\nhttps://github.com/jquery/jquery/blob/master/src/core/ready.js\nhttps://github.com/julienschmidt/contentloaded/blob/master/contentloaded.js\nhttps://github.com/dperini/ContentLoaded/blob/master/src/contentloaded.js\nhttps://github.com/pirxpilot/domready/blob/master/index.js\n* https://gomakethings.com/a-native-javascript-equivalent-of-jquerys-ready-method/\n\n*/\n/**\n * DEPENDENCIES\n */\n// @TODO: code split these: http://jonathancreamer.com/advanced-webpack-part-2-code-splitting/\nvar ajax = require('./lib/ajax.js');\nvar dom = require('./lib/dom.js');\nvar query = require('./lib/query.js');\nvar utilities = require('./lib/utilities.js');\nvar storage = require('./lib/storage.js');\nvar debug;\n\n// var ajax;\n// var dom;\n// var query;\n// var utilities;\n// var storage;\n\n\n/**\n* MODULE\n*/\nfunction ieVersion() {\n  var match = /\\b(MSIE |Trident.*?rv:|Edge\\/)(\\d+)/.exec(navigator.userAgent);\n  if (match) {return parseInt(match[2])};\n}\n\nfunction Manager() {\n  /**\n  * OPTIONS\n  */\n  // Should this be changed?\n  // var parseDELETE = function (req) {\n  //   var result;\n  //   try {\n  //     result = JSON.parse(req.responseText);\n  //   } catch (e) {\n  //     result = req.responseText;\n  //   }\n  //   return [result, req];\n  // };\n\n  // var t1 = '16'; //@@@ Delete later\n  iev = ieVersion();\n  this.properties = {\n    options: {\n      page: {},\n      global: {},\n    },\n    page: {\n      code: '',\n      url: '',\n      status: {\n        ready: false,\n        initilizing: false,\n        authReady: false,\n        masterSWRegistered: false,\n\n        DOMContentLoaded: false,\n        eventHandlersSet: false\n      },\n      // initReady: false,\n      // initSecondaryReady: false,\n      queryString: {\n        data: {},\n        exists: undefined\n      },\n      libErrors: [],\n      isSupportedBrowser: (!iev || iev >= 11) // https://makandracards.com/makandra/53475-minimal-javascript-function-to-detect-version-of-internet-explorer-or-edge\n\n      // auth: {\n      //   status: undefined,\n      //   lastAction: 'unknown',\n      // },\n    },\n    global: {\n      version: '',\n      url: '',\n      cacheBreaker: '',\n      brand: {\n        name: 'default'\n      },\n      // preferences: {\n      //   // firebase: {\n      //   //   enabled: false\n      //   // },\n      //   // pushNotifications: {\n      //   //   enabled: false\n      //   // },\n      //   // load: {\n      //   //   variables: '',\n      //   //   functionsFirebase: '',\n      //   // },\n      //   // auth: {\n      //   //   prohibitedReturnURL: '',\n      //   //   requiredReturnURL: '',\n      //   // },\n      // },\n    },\n    auth: {\n      user: false\n    },\n    references: {\n      serviceWorker: undefined\n    },\n    // firebase: {\n    //   user: {\n    //     exists: false,\n    //     authStateChangeRan: false,\n    //     authObject: {}\n    //   },\n    //   config: {\n    //     apiKey: '',\n    //     authDomain: '',\n    //     databaseURL: '',\n    //     projectId: '',\n    //     storageBucket: '',\n    //     messagingSenderId: '',\n    //   },\n    //   functions: {\n    //     auth: undefined,\n    //     messaging: undefined,\n    //     database: undefined,\n    //     firestore: undefined,\n    //   },\n    // },\n    meta: {\n      environment: 'production'\n    }\n  };\n\n  try {\n    // set(this, 'properties.options.page', pageOptions);\n    // set(this, 'properties.options.global', globalOptions);\n    // set(this, 'properties.global.domain', document.location.hostname);\n    // set(this, 'properties.page.url', document.location.href);\n    // this.properties.options.page = pageOptions || {};\n    // this.properties.options.global = globalOptions || {};]\n    // this.properties.global.urlRoot = window.location.protocol + '//' + window.location.hostname;\n    this.properties.page.url = window.location.href;\n  } catch (e) {\n\n  }\n\n}\n\n  /**\n  * METHODS\n  */\n  Manager.prototype.get = function(path) {\n    return utilities.get(this, 'properties.' + path);\n  }\n\n  Manager.prototype.set = function(path, value) {\n   return utilities.set(this, 'properties.' + path, value);\n  }\n\n  Manager.prototype.setEventListeners = function() {\n    // console.log('--------setEventListeners');\n    if (utilities.get(this, 'properties.page.status.eventHandlersSet', false) == false) {\n      this.properties.page.status.eventHandlersSet = true;\n      var This = this;\n      // document.addEventListener('click', function (event) {\n      This.dom().select('body').on('click', function (event) {\n        // console.log('Clicked.... NEW');\n        This.log('Clicked', event.target);\n        // auth events\n        if (event.target.matches('.auth-signin-email-btn')) {\n          This.auth().signIn('email');\n        } else if (event.target.matches('.auth-signup-email-btn')) {\n          This.auth().signUp('email');\n        } else if (event.target.matches('.auth-signout-all-btn')) {\n          This.auth().signOut();\n        } else if (event.target.matches('.auth-forgot-email-btn')) {\n          This.auth().forgot();\n        } else if (event.target.matches('#prechat-btn')) {\n          load_tawk(This, This.properties.options);\n        }\n\n        // push notification events\n        if (event.target.matches('.auth-subscribe-notifications-btn')) {\n          //@@@NOTIFICATIONS\n          This.notifications().subscribe()\n          .catch(function (e) {\n            console.error(e);\n          });\n        }\n\n      }, false);\n    }\n  }\n\n  // Manager.prototype.signIn = function(method, email, password) {\n  //   method = method || 'email';\n  //   email = email || this.dom().select('.auth-email-input').getValue();\n  //   password = password || this.dom().select('.auth-password-input').getValue();\n  //   var This = this;\n  //   This.log('Signin attempt: ', method, email, password);\n  //   if (method == 'email') {\n  //     firebase.auth().signInWithEmailAndPassword(email, password)\n  //     .then(function(credential) {\n  //       This.log('Good signin');\n  //       This.properties.options.auth.signIn(false, credential.user);\n  //     })\n  //     .catch(function(error) {\n  //       This.dom().select('.auth-error-message-element').show().setInnerHTML(error.message);\n  //       This.log('error', error.message);\n  //       This.properties.options.auth.signIn(error);\n  //     });\n  //   }\n  // }\n\n  // Manager.prototype.signUp = function(method, email, password, passwordConfirm) {\n  //   method = method || 'email';\n  //   email = email || this.dom().select('.auth-email-input').getValue();\n  //   password = password || this.dom().select('.auth-password-input').getValue();\n  //   passwordConfirm = passwordConfirm || this.dom().select('.auth-password-confirm-input').getValue();\n  //   var This = this;\n  //   This.log('Signup attempt: ', method, email, password, passwordConfirm);\n  //   if (method == 'email') {\n  //     firebase.auth().createUserWithEmailAndPassword(email, password)\n  //     .then(function(credential) {\n  //       This.log('Good signup');\n  //       This.properties.options.auth.signUp(false, credential.user);\n  //     })\n  //     .catch(function(error) {\n  //       This.dom().select('.auth-error-message-element').show().setInnerHTML(error.message);\n  //       This.log('error', error.message);\n  //       This.properties.options.auth.signUp(error);\n  //     });\n  //   }\n  // }\n\n  // Manager.prototype.signOut = function() {\n  //   this.log('signOut');\n  //   var This = this;\n  //   firebase.auth().signOut()\n  //   .then(function() {\n  //     This.log('signOut success.');\n  //     This.properties.options.auth.signOut();\n  //   })\n  //   .catch(function(error) {\n  //     This.log('signOut failed: ', error);\n  //     This.properties.options.auth.signOut(error);\n  //   });\n  // }\n\n  // Manager.prototype.forgot = function(email) {\n  //   email = email || this.dom().select('.auth-email-input').getValue();\n  //   this.log('forgot');\n  //   var This = this;\n  //\n  //   firebase.auth().sendPasswordResetEmail(email)\n  //   .then(function() {\n  //     This.log('forgot success.');\n  //     This.properties.options.auth.forgot();\n  //   })\n  //   .catch(function(error) {\n  //     This.log('forgot failed: ', error);\n  //     This.dom().select('.auth-error-message-element').show().setInnerHTML(error.message);\n  //     This.properties.options.auth.forgot(error);\n  //   });\n  //\n  // }\n\n  function _authStateHandler(This, user) {\n    // This.log('authStateHandler', user);\n    if (user != null) {\n      if (user.isAnonymous === false) {\n        _authHandle_in(This, user);\n      } else {\n        _authHandle_out(This);\n      }\n    } else {\n      _authHandle_out(This);\n    }\n  }\n\n  function _authHandle_in(This, user) {\n    // This.log('_authHandle_in', user);\n    if (This.properties.page.status.didSignUp) {\n      var domLib = This.dom();\n      This.ajax().request({\n        url: 'https://us-central1-' + This.properties.options.libraries.firebase_app.config.projectId + '.cloudfunctions.net/bm_signUpHandler',\n        // url: 'http://localhost:5001/ultimate-jekyll/us-central1/bm_signUpHandler',\n        data: {\n          email: user.email,\n          uid: user.uid,\n          newsletterSignUp: domLib.select('.auth-newsletter-input').getValue(),\n          affiliateCode: This.storage().get('auth.affiliateCode', '')\n        }\n      })\n      .success(function (response, status, data) {\n        // console.log(data);\n      })\n      .always(function (response, status) {\n        _authHandle_in_normal(This, user);\n      });\n    } else {\n      _authHandle_in_normal(This, user);\n    }\n  }\n\n  function _authHandle_in_normal(This, user) {\n    var domLib = This.dom();\n    var returnUrl = This.query().create(window.location.href).get('auth_redirect');\n    if (returnUrl) {\n      window.location.href = decodeURIComponent(returnUrl);\n      return;\n    }\n    if (This.properties.options.auth.state == 'prohibited') {\n      window.location.href = This.properties.options.auth.sends.prohibited;\n      return;\n    }\n    domLib.select('.auth-signedin-true-element').show();\n    domLib.select('.auth-signedin-false-element').hide();\n    domLib.select('.auth-email-element').each(function(i, e) {\n      if (e.tagName == 'INPUT') {\n        domLib.select(e).setValue(user.email)\n      } else {\n        domLib.select(e).setInnerHTML(user.email)\n      }\n    });\n    domLib.select('.auth-uid-element').each(function(i, e) {\n      if (e.tagName == 'INPUT') {\n        domLib.select(e).setValue(user.uid)\n      } else {\n        domLib.select(e).setInnerHTML(user.uid)\n      }\n    });\n  }\n\n  function _authHandle_out(This) {\n    // This.log('_authHandle_out: ', This.properties.options.auth.state);\n    if (This.properties.options.auth.state == 'required') {\n      window.location.href = This.query().create(This.properties.options.auth.sends.required).set('auth_redirect', encodeURIComponent(window.location.href)).getUrl();\n      return;\n    }\n    This.dom().select('.auth-signedin-true-element').hide();\n    This.dom().select('.auth-signedin-false-element').show();\n  }\n\n  Manager.prototype.ready = function(fn, options) {\n    options = options || {};\n    options.retryInterval = options.retryInterval || 100;\n    options.waitFor = options.waitFor || [];\n\n    var This = this;\n\n    var waitFor = true;\n    for (var i = 0; i < options.waitFor.length; i++) {\n      var cur = options.waitFor[i] || {};\n      var val = window[cur.name];\n\n      if (cur.condition == '==' && val != cur.value) {\n        waitFor = false;\n        break;\n      }\n      if (cur.condition == '!=' && val == cur.value) {\n        waitFor = false;\n        break;\n      }\n      if (cur.condition == 'defined' && typeof val == 'undefined') {\n        waitFor = false;\n        break;\n      }\n    }\n\n    if ( (utilities.get(this, 'properties.page.status.ready', false) == false) || !waitFor ) {\n      // console.log('polling b...', options.waitFor, !waitFor);\n      setTimeout(function () {\n        This.ready(fn, options);\n      }, options.retryInterval);\n    } else {\n      // Performance\n      This.performance().mark('manager_ready');\n\n      return fn();\n      // return checkDOMLoaded(window, fn);\n    }\n  }\n\n  // Manager.prototype.authReady = function(fn, options) {\n  //   options = options || {};\n  //   options.retryInterval = options.retryInterval || 100;\n  //   var This = this;\n  //   if ( (utilities.get(this, 'properties.page.status.authReady', false) == false) ) {\n  //     setTimeout(function () {\n  //       This.authReady(fn, options);\n  //     }, options.retryInterval);\n  //   } else {\n  //     // Performance\n  //     if ('performance' in window) {\n  //       window.performance.mark('manager_authReady');\n  //     }\n  //     return fn();\n  //   }\n  // }\n\n  Manager.prototype.serviceWorker = function() {\n    var This = this;\n    var SWAvailable = (('serviceWorker' in navigator));\n    if (SWAvailable) {\n      try {\n        var swref = This.properties.references.serviceWorker.active || navigator.serviceWorker.controller;\n      } catch (e) {}\n    }\n    return {\n      postMessage: function() {\n        // var args = getArgs(arguments);\n        var args = arguments;\n        if (!SWAvailable) {return};\n\n        try {\n          var messageChannel = new MessageChannel();\n          messageChannel.port1.onmessage = function(event) {\n            if (!event.data.error && args[1]) {\n              args[1](event.data);\n            }\n          };\n          // navigator.serviceWorker.controller.postMessage(args[0], [messageChannel.port2]);\n          swref.postMessage(args[0], [messageChannel.port2]);\n        } catch (e) {\n          console.error(e);\n        }\n\n        // if (!navigator.serviceWorker.controller) {\n        //   This.log('postMessage...');\n        //   setTimeout(function () {\n        //     This.serviceWorker().postMessage(args[0], args[1]);\n        //   }, 100);\n        // } else {\n        //   // post message: https://stackoverflow.com/questions/30177782/chrome-serviceworker-postmessage\n        //   var messageChannel = new MessageChannel();\n        //   messageChannel.port1.onmessage = function(event) {\n        //     if (!event.data.error && args[1]) {\n        //       args[1](event.data);\n        //     }\n        //   };\n        //   navigator.serviceWorker.controller.postMessage(args[0], [messageChannel.port2])\n        // }\n      }\n    }\n\n  }\n\n  // navigator.serviceWorker.ready.then(function(serviceWorkerRegistration) {\n  //   // Let's see if you have a subscription already\n  //   console.log('&&& GET SUB');\n  //   return serviceWorkerRegistration.pushManager.getSubscription();\n  // })\n  // .then(function(subscription) {\n  //   if (!subscription) {\n  //     // You do not have subscription\n  //     console.log('&&& NO SUBSCRIPTION');\n  //   } else {\n  //     console.log('&&& YES SUBSCRIPTION');\n  //\n  //   }\n  //\n  //   // You have subscription.\n  //   // Send data to service worker\n  //   // navigator.serviceWorker.controller.postMessage({'data': dataToServiceWorker});\n  //\n  // })\n\n  // navigator.serviceWorker.ready.then(() => {\n  //   // I thought the page would be controlled at this point, thanks to clients.claim()\n  //   console.log('.ready resolved, and navigator.serviceWorker.controller is', navigator.serviceWorker.controller);\n  //   navigator.serviceWorker.addEventListener('controllerchange', () => {\n  //     console.log('Okay, now things are under control. navigator.serviceWorker.controller is', navigator.serviceWorker.controller);\n  //   });\n  // });\n\n  // Manager.prototype.init = async function() {\n  // Manager.prototype.init = function() {\n  //   if ((get(this, 'properties.page.status.ready', false) == false) && ((get(this, 'properties.page.status.initializing', false) == false))) {\n  //     set(this, 'properties.page.status.initializing', true);\n  //     console.log('INIT Called');\n  //     // await wait(300,100);\n  //     console.log('INIT finished waiting');\n  //     // this.testFunction();\n  //\n  //     // setup\n  //     this.setEventListeners();\n  //\n  //     // make sure firebase etc is loaded and elements on page are updated to reflect user's auth status\n  //     // also update properties so that it reflects whether the user is logged inspect\n  //\n  //     // check that navigator exists\n  //\n  //     //check local storage exists\n  //\n  //     // parse query string\n  //\n  //     // add cookie thing with settings\n  //     // _ready = true;\n  //     set(this, 'properties.page.status.initializing', false);\n  //     set(this, 'properties.page.status.ready', true);\n  //\n  //   }\n  //\n  //   return new Promise((resolve, reject) => {\n  //     resolve(true);\n  //   });\n  // }\n\n  // init with polyfills\n  Manager.prototype.init = function(configuration, callback) {\n    var This = this;\n    if ((utilities.get(This, 'properties.page.status.ready', false) == false) && ((utilities.get(This, 'properties.page.status.initializing', false) == false))) {\n\n      // Performance\n      This.performance().mark('manager_init');\n\n      // set initializing to true\n      This.properties.page.status.initializing = true;\n\n      // set other properties\n      // This.properties.meta.environment = ((window.location.href.indexOf('://localhost') != -1) || (window.location.href.indexOf('://127.0') != -1) || (window.location.href.indexOf('ngrok.io') != -1) || (window.location.href.indexOf('://192.') != -1) ) ? 'development' : 'production';\n      This.properties.meta.environment = /((:\\/\\/)(local|127\\.|192\\.|.+ngrok\\.))/.test(window.location.href) ? 'development' : 'production';\n\n\n      init_loadPolyfills(This, configuration, function() {\n          This.properties.page.status.initializing = false;\n          // This.properties.genericPromise = new Promise(resolve => { resolve() });\n          var tempUrl = This.properties.global.url;\n          var options_defaults = {\n            // debug: {\n            //   environment: This.properties.meta.environment,\n            // },\n            queryString: {\n              saveToStorage: false\n            },\n            pushNotifications: {\n              autoRequest: 60 // how long to wait before auto ask, 0 to disable\n            },\n            serviceWorker: {\n              path: ''\n            },\n            initChecks: {\n              DOMContentLoaded: false, // preset to false because takes a while and dont need if script is loaded at bottom of DOM\n              features: [] // an array of javascript and dom features to check for (NIY)\n            },\n            auth: {\n              state: 'default', // required, prohibited, default\n              sends: {\n                required: (tempUrl + '/signin/'),\n                prohibited: (tempUrl + '/')\n              }\n            },\n            popup: {\n              enabled: true,\n              config: {\n                title: '',\n                message: '',\n                btn_ok: {\n                  text: '',\n                  link: ''\n                }\n              }\n            },\n            libraries: {\n              firebase_app: {\n                enabled: true,\n                config: {\n                  apiKey: '',\n                  authDomain: '',\n                  databaseURL: '',\n                  projectId: '',\n                  storageBucket: '',\n                  messagingSenderId: '',\n                  appId: ''\n                }\n              },\n              firebase_firestore: {\n                enabled: true\n              },\n              firebase_messaging: {\n                enabled: true\n              },\n              firebase_auth: {\n                enabled: true,\n              },\n              lazysizes: {\n                enabled: true\n              },\n              sentry: {\n                enabled: true,\n                config: {\n                  dsn: '',\n                  release: ''\n                }\n              },\n              tawk: {\n                enabled: true,\n                config: {\n                  chatId: '',\n                  prechatColor: '#02A84E'\n                }\n              },\n              cookieconsent: {\n                enabled: true,\n                config: {\n                  palette: {\n                    popup: {\n                      background: '#237afc',\n                      text: '#ffffff'\n                    },\n                    button: {\n                      background: '#fff',\n                      text: '#237afc'\n                    }\n                  },\n                  theme: 'classic',\n                  position: 'bottom-left',\n                  type: '',\n                  showLink: false,\n                  content: {\n                    message: 'We use cookies to ensure you get the best experience on our website. By continuing to use the site, you agree to our<a href=\"' + tempUrl + '/terms/\" class=\"cc-link\" style=\"padding-right: 0\">terms of service</a>.',\n                    dismiss: 'Got it!',\n                    // link: 'Learn more',\n                    // href: '' || This.properties.global.urlRoot + '/cookies/',\n                    // href: (tempUrl + '/cookies/')\n                  }\n                }\n              }\n            }\n          };\n\n          var options_user = {};\n          function eachRecursive(obj, parent) {\n            parent = (!parent) ? '' : parent;\n              for (var key in obj) {\n                if (typeof obj[key] == \"object\" && obj[key] !== null && !Array.isArray(obj[key])) {\n                  eachRecursive(obj[key], parent + key + '.');\n                } else {\n                  utilities.set(options_user, parent + key, utilities.get(options_defaults, parent + key) );\n                  var t_globalItem = utilities.get(configuration, 'global.settings.' + parent + key, undefined);\n                  var t_pageItem = utilities.get(configuration, 'page.settings.' + parent + key, undefined);\n                  if (typeof t_globalItem !== 'undefined') {\n                    utilities.set(options_user, parent + key, t_globalItem);\n                  }\n                  if (typeof t_pageItem !== 'undefined') {\n                    utilities.set(options_user, parent + key, t_pageItem);\n                  }\n                }\n              }\n          }\n\n          eachRecursive(options_defaults);\n          This.properties.options = options_user;\n\n          // set non-option properties\n          This.properties.global.version = configuration.global.version;\n          This.properties.global.url = configuration.global.url;\n          This.properties.global.cacheBreaker = configuration.global.cacheBreaker;\n          This.properties.global.brand.name = configuration.global.brand.name;\n          This.properties.meta.environment = utilities.get(configuration, 'global.settings.debug.environment', This.properties.meta.environment);\n\n          This.log('Config: ', options_user);\n\n          // check DOMContentLoaded\n          // if (utilities.get(options_user, 'initChecks.DOMContentLoaded', false) == true) {\n          if (options_user.initChecks.DOMContentLoaded == true) {\n            This.dom().checkDOMContentLoaded(window, function() {\n              This.properties.page.status.DOMContentLoaded = true;\n              This.log('DOMContentLoaded = ', This.properties.page.status.DOMContentLoaded);\n            });\n          } else {\n            This.properties.page.status.DOMContentLoaded = true;\n            This.log('DOMContentLoaded = ', This.properties.page.status.DOMContentLoaded);\n          }\n\n          // parse query stringify\n          This.properties.page.queryString = This.query()\n            .create(window.location.href, {});\n          if (This.properties.page.queryString.get('aff')) {\n            This.storage().set('auth.affiliateCode', This.properties.page.queryString.get('aff'));\n          }\n          if (This.properties.page.queryString.get('redirect')) {\n            window.location.href = decodeURIComponent(This.properties.page.queryString.get('redirect'));\n            return;\n          }\n\n          // load critical libraries\n          function postCrucial() {\n            // console.log('HERE 5');\n\n            // handle firebase user\n            if (firebase.auth) {\n              firebase.auth().onAuthStateChanged(function(user) {\n                This.properties.page.status.authReady = true;\n                This.properties.auth.user = user || false;\n                _authStateHandler(This, user);\n              })\n            }\n\n            // setup\n            This.setEventListeners();\n\n            // display outdated if it is\n            try {\n              if (!This.properties.page.isSupportedBrowser) {\n                var box = document.getElementsByClassName(\"master-alert-outdated\")[0];\n                box.style.display = \"block\";\n                document.body.insertBefore(box, document.body.firstChild);\n              }\n            } catch (e) {}\n\n            // run the init callback\n            This.properties.page.status.ready = true;\n\n            try {\n              callback();\n            } catch (e) {\n              console.error(e);\n            }\n\n            var tawkOps = options_user.libraries.tawk;\n            if (tawkOps.enabled) {\n              This.dom().select('#prechat-btn').css({background: tawkOps.config.prechatColor}).show();\n            }\n\n            // loan non-critical libraries\n            load_lazysizes(This, options_user);\n            load_cookieconsent(This, options_user);\n            subscriptionManager(This, options_user);\n\n            This.log('Manager ', This);\n            return;\n          }\n\n          // console.log('HERE 0');\n          Promise.all([\n            load_sentry(This, options_user),\n            load_firebase(This, options_user),\n          ])\n          .then(function() {\n            postCrucial();\n          })\n          .catch(function (e) {\n            //@@@ LOG TO SENTRY HERE?\n            console.error('manager', e);\n            // postCrucial();\n          })\n          // console.log('HERE 0');\n          // Promise.all([\n          //   load_sentry(This, options_user),\n          //   load_firebase(This, options_user),\n          // ])\n          // .then(function() {\n          //   console.log('HERE 5');\n          //\n          //   // handle firebase user\n          //   if (firebase.auth) {\n          //     firebase.auth().onAuthStateChanged(function(user) {\n          //       This.properties.page.status.authReady = true;\n          //       This.properties.auth.user = user || false;\n          //       _authStateHandler(This, user);\n          //     })\n          //   }\n          //\n          //   // setup\n          //   This.setEventListeners();\n          //\n          //   // run the init callback\n          //   This.properties.page.status.ready = true;\n          //   callback();\n          //\n          //   // loan non-critical libraries\n          //   load_lazysizes(This, options_user);\n          //   load_cookieconsent(This, options_user);\n          //   subscriptionManager(This, options_user);\n          //\n          //   This.log('Manager ', This);\n          //   return;\n          // })\n          // .catch(function (e) {\n          //   console.log('E', e);\n          // })\n\n      })\n\n    } else {\n      return;\n    }\n\n  }\n\n  // Manager.prototype.subscribeToPushNotifications = function(options) {\n  //   if ((typeof firebase.messaging !== 'undefined')) {\n  //     return firebase.messaging().requestPermission()\n  //       .then(() => checkSubscription())\n  //       .catch((err) => {\n  //         console.error(err);\n  //       });\n  //   }\n  // }\n  // Sentry.configureScope(scope => {\n  //   scope.setExtra('battery', 0.7);\n  //   scope.setTag('user_mode', 'admin');\n  //   scope.setUser({ id: '4711' });\n  //   // scope.clear();\n  // });\n  //\n  // // Add a breadcrumb for future events\n  // Sentry.addBreadcrumb({\n  //   message: 'My Breadcrumb',\n  //   // ...\n  // });\n  //\n  // // Capture exceptions, messages or manual events\n  // Sentry.captureMessage('Hello, world!');\n  // Sentry.captureException(new Error('Good bye'));\n  // Sentry.captureEvent({\n  //   message: 'Manual',\n  //   stacktrace: [\n  //     // ...\n  //   ],\n  // });\n\n  Manager.prototype.sentry = function() {\n    // var en = (Sentry && Sentry)\n    return {\n      configureScope: function (cb) {\n        try {\n          Sentry.configureScope(function (scope) {\n            cb(scope);\n          })\n        } catch (e) {\n\n        }\n      },\n      captureException: function (e) {\n        try {\n          Sentry.captureException(e)\n        } catch (e) {\n\n        }\n      }\n    };\n  }\n\n  Manager.prototype.auth = function() {\n    var This = this;\n    var firebaseActive = typeof firebase !== 'undefined';\n    var erel = '.auth-error-message-element';\n    var domLib = This.dom();\n    function _displayError(msg) {\n      domLib.select(erel).show().setInnerHTML(msg);\n    }\n    function _preDisplayError() {\n      domLib.select(erel).hide().setInnerHTML('');\n    }\n\n    function signinButtonDisabled(status) {\n      if (status) {\n        domLib.select('.auth-signin-email-btn').setAttribute('disabled', true);\n      } else {\n        domLib.select('.auth-signin-email-btn').removeAttribute('disabled');\n      }\n    }\n    function signupButtonDisabled(status) {\n      if (status) {\n        domLib.select('.auth-signup-email-btn').setAttribute('disabled', true);\n      } else {\n        domLib.select('.auth-signup-email-btn').removeAttribute('disabled');\n      }\n    }\n    function forgotButtonDisabled(status) {\n      if (status) {\n        domLib.select('.auth-forgot-email-btn').setAttribute('disabled', true);\n      } else {\n        domLib.select('.auth-forgot-email-btn').removeAttribute('disabled');\n      }\n    }\n    return {\n      isAuthenticated: function () {\n        return firebaseActive ? !!firebase.auth().currentUser : false;\n      },\n      getUser: function () {\n        var defaultUser = {email: null, uid: null};\n        return firebaseActive ? firebase.auth().currentUser || defaultUser : defaultUser;\n      },\n      ready: function (fn, options) {\n        options = options || {};\n        options.retryInterval = options.retryInterval || 100;\n        // if ( (This.get('page.status.authReady', false) == false) ) {\n        // Manager.log('--- authReady() REAL');\n        if ( (utilities.get(This, 'properties.page.status.authReady', false) == false) ) {\n          setTimeout(function () {\n            This.auth().ready(fn, options);\n          }, options.retryInterval);\n        } else {\n          // Performance\n          This.performance().mark('manager_authReady');\n          // This.log('.authReady()', This.auth().getUser());\n          return fn();\n        }\n      },\n      signIn: function (method, email, password) {\n        method = method || 'email';\n        email = email || domLib.select('.auth-email-input').getValue();\n        password = password || domLib.select('.auth-password-input').getValue();\n        _preDisplayError();\n        This.log('Signin attempt: ', method, email, password);\n        if (method == 'email') {\n          signinButtonDisabled(true);\n          firebase.auth().signInWithEmailAndPassword(email, password)\n          .then(function(credential) {\n            signinButtonDisabled(false);\n            This.log('Good signin');\n          })\n          .catch(function(error) {\n            signinButtonDisabled(false);\n            _displayError(error.message);\n            This.log('Error', error.message);\n          });\n        }\n      },\n      signUp: function(method, email, password, passwordConfirm) {\n        method = method || 'email';\n        email = email || domLib.select('.auth-email-input').getValue();\n        password = password || domLib.select('.auth-password-input').getValue();\n        passwordConfirm = passwordConfirm || domLib.select('.auth-password-confirm-input').getValue();\n        _preDisplayError();\n        This.log('Signup attempt: ', method, email, password, passwordConfirm);\n        var termEl = domLib.select('.auth-terms-input');\n        if (termEl.exists() && !termEl.getValue() == true) {\n          _displayError(\"Please review and accept our terms.\");\n          return;\n        }\n        if (method == 'email') {\n          if (password == passwordConfirm) {\n            signupButtonDisabled(true);\n            firebase.auth().createUserWithEmailAndPassword(email, password)\n            .then(function(credential) {\n              This.properties.page.status.didSignUp = true;\n              This.log('Good signup');\n              signupButtonDisabled(false);\n            })\n            .catch(function(error) {\n              signupButtonDisabled(false);\n              _displayError(error.message);\n              This.log('error', error.message);\n            });\n          } else {\n            _displayError(\"Passwords don't match.\");\n          }\n        }\n\n      },\n      signOut: function() {\n        // This.log('signOut()');\n        // var This = this;\n        firebase.auth().signOut()\n        .then(function() {\n          This.log('signOut success.');\n        })\n        .catch(function(error) {\n          This.log('signOut failed: ', error);\n        });\n      },\n      forgot: function(email) {\n        // This.log('forgot()');\n        email = email || domLib.select('.auth-email-input').getValue();\n        forgotButtonDisabled(true);\n        _preDisplayError();\n        firebase.auth().sendPasswordResetEmail(email)\n        .then(function() {\n          forgotButtonDisabled(false);\n          This.log('forgot success.');\n          _displayError('A reset link has been sent to you.');\n        })\n        .catch(function(error) {\n          forgotButtonDisabled(false);\n          This.log('forgot failed: ', error);\n          _displayError(error.message);\n        });\n      },\n\n    }\n  }\n\n  //@@@NOTIFICATIONS\n  Manager.prototype.notifications = function(options) {\n    var supported = (typeof firebase.messaging !== 'undefined') && ('serviceWorker' in navigator) && (\"Notification\" in window);\n    var This = this;\n    return {\n      isSubscribed: function () {\n        This.log('isSubscribed()');\n        return new Promise(function(resolve, reject) {\n          if (!supported || Notification.permission != 'granted') {return resolve(false)};\n          return resolve(true);\n        })\n      },\n      subscribe: function () {\n        This.log('subscribe()');\n        return new Promise(function(resolve, reject) {\n          // var subscribed = !This.notifications().isSubscribed();\n\n          // return resolve(firebase.messaging().getToken());\n          firebase.messaging().getToken()\n          .then(function (token) {\n            var user = This.auth().getUser();\n            var localSubscription = This.storage().get('notifications', {});\n            var localHash = localSubscription.token + '|' + localSubscription.email;\n            var userHash = token + '|' + user.email;\n\n            // var override = false;\n            var currentDate = new Date();\n            var dateDifference = (currentDate.getTime() - new Date(localSubscription.lastSynced || 0).getTime()) / (1000 * 3600 * 24);\n\n            // Run if local hash is different than the user hash OR it was last updated more than 1 day ago\n            if (localHash != userHash || dateDifference > 1) {\n              var timestamp = currentDate.toISOString();\n              var timestampUNIX = Math.floor((+new Date(timestamp)) / 1000);\n              var subscriptionRef = firebase.firestore().doc('notifications/subscriptions/all/' + token);\n\n              function saveLocal() {\n                // This.log('Saved local token: ', token);\n                This.storage().set('notifications', {email: user.email, token: token, lastSynced: timestamp});\n              }\n\n              function saveServer(doc) {\n                // Run if it (DOES NOT EXIST on server) OR (it does AND the email field is null AND the current user is not null)\n                if (!doc.exists || (doc.exists && !This.utilities().get(doc.data(), 'link.user.data.email', '') && user.email)) {\n                  subscriptionRef\n                  .set(\n                    {\n                      meta: {\n                        dateSubscribed: {\n                          timestamp: timestamp,\n                          timestampUNIX: timestampUNIX\n                        }\n                      },\n                      token: token,\n                      link: {\n                        user: {\n                          lastLinked: {\n                            timestamp: timestamp,\n                            timestampUNIX: timestampUNIX\n                          },\n                          pk: user.uid,\n                          data: {\n                            uid: user.uid,\n                            email: user.email\n                          }\n                        }\n                      },\n                      tags: ['general']\n                    },\n                    {\n                      merge: true\n                    }\n                  )\n                  .then(function(data) {\n                    // This.log('Updated token: ', token);\n                    saveLocal();\n                    resolve(true);\n                  })\n                } else {\n                  saveLocal();\n                  // This.log('Skip sync, server data exists.');\n                  resolve(false);\n                }\n              }\n\n              // Get the doc first and then run a check to see if it needs to be updated\n              subscriptionRef\n              .get()\n              .then(function (doc) {\n                saveServer(doc);\n              })\n              .catch(function () {\n                saveServer({exists: false})\n              })\n            } else {\n              // This.log('Skip sync, recently done.');\n              resolve(false);\n            }\n\n          })\n          .catch(function (e) {\n            reject(e);\n          })\n        })\n      }\n    }\n  }\n\n  function handleTokenRefresh(This) {\n    This.log('handleTokenRefresh()');\n    return new Promise(function(resolve, reject) {\n      var notifications = This.notifications();\n      notifications.isSubscribed()\n      .then(function (result) {\n        if (result) {\n          return resolve(This.notifications().subscribe());\n        } else {\n          return resolve();\n        }\n      })\n    });\n  }\n\n\n  /*\n  HELPERS\n  */\n  function subscriptionManager(This, options_user) {\n    // if (('serviceWorker' in navigator) && (options_user.pushNotifications.enabled) && (typeof firebase.messaging !== 'undefined')) {\n    if (('serviceWorker' in navigator) && (typeof firebase.messaging !== 'undefined')) {\n      var swaddress = options_user.serviceWorker.path || 'master-service-worker.js';\n      // service worker guide: https://developers.google.com/web/updates/2018/06/fresher-sw\n      navigator.serviceWorker.register('/' + swaddress + '?config=' + encodeURIComponent(JSON.stringify({name: This.properties.global.brand.name, env: This.properties.meta.environment, v: This.properties.global.version, firebase: options_user.libraries.firebase_app.config})) )\n      .then(function (registration) {\n        firebase.messaging().useServiceWorker(registration);\n        This.properties.references.serviceWorker = registration;\n        // TODO: https://googlechrome.github.io/samples/service-worker/post-message/\n        // --- leverage this example ^^^ for caching! It's grat and you can do one page at a time through postMessage!\n\n        // function listenForWaitingServiceWorker(reg, callback) {\n        //   function awaitStateChange() {\n        //     reg.installing.addEventListener('statechange', function() {\n        //       if (this.state === 'installed') callback(reg);\n        //     });\n        //   }\n        //   if (!reg) return;\n        //   if (reg.waiting) return callback(reg);\n        //   if (reg.installing) awaitStateChange();\n        //   reg.addEventListener('updatefound', awaitStateChange);\n        // }\n        //\n        // // reload once when the new Service Worker starts activating\n        // var refreshing;\n        // navigator.serviceWorker.addEventListener('controllerchange',\n        //   function() {\n        //     if (refreshing) return;\n        //     refreshing = true;\n        //     window.location.reload();\n        //   }\n        // );\n        // function promptUserToRefresh(reg) {\n        //   // this is just an example\n        //   // don't use window.confirm in real life; it's terrible\n        //   if (window.confirm(\"New version available! OK to refresh?\")) {\n        //     reg.waiting.postMessage({command: 'skipWaiting'});\n        //   }\n        // }\n        // listenForWaitingServiceWorker(registration, promptUserToRefresh);\n\n        // registration.update();\n        This.properties.page.status.masterSWRegistered = true;\n\n\n        This.log('SW Registered.');\n        //@@@NOTIFICATIONS\n        firebase.messaging().onTokenRefresh(\n          handleTokenRefresh(This)\n          .catch(function (e) {\n            console.error(e);\n          })\n        )\n\n        if (options_user.pushNotifications.autoRequest) {\n          setTimeout(function () {\n            //@@@NOTIFICATIONS\n            This.notifications().subscribe()\n            .catch(function (e) {\n              console.error(e);\n            });\n          }, options_user.pushNotifications.autoRequest * 1000);\n        }\n\n        try {\n          firebase.messaging().onMessage(function (payload) {\n            new Notification(payload.notification.title, payload.notification);\n          })\n        } catch (e) {\n          console.error('onMessage', e);\n        }\n\n      })\n      .catch(function (e) {\n        // console.log('***2');\n        console.error(e);\n      });\n\n      // SW Ready\n      // navigator.serviceWorker.ready.then(function(registration) {\n      // });\n\n    }\n  }\n\n\n\n  /*\n  EXTERNAL LIBS\n  */\n  var load_firebase = function(This, options) {\n    // console.log('HERE 1');\n    return new Promise(function(resolve, reject) {\n      if (typeof window.firebase !== 'undefined') {\n        return resolve();\n      }\n      if (options.libraries.firebase_app.enabled == true) {\n        require.ensure([], function() {\n          window.firebase = require('firebase/app');\n          window.app = firebase.initializeApp(options.libraries.firebase_app.config);\n          This.log('Loaded Firebase.');\n        }, 'firebase-app')\n        .then(function() {\n          // console.log('HERE 2');\n\n          Promise.all([\n            load_firebase_auth(This, options),\n            load_firebase_firestore(This, options),\n            load_firebase_messaging(This, options),\n          ])\n          .then(function() {\n            // console.log('HERE 3');\n            return resolve();\n          })\n          .catch(function(e) {\n            console.log('HERE 3 broke', e);\n            This.properties.page.libErrors.push({name: 'firebase_app', error: e})\n            return reject(e);\n          });\n          // console.log('HERE 4');\n         });\n      } else {\n        return resolve();\n      }\n    });\n  }\n\n\n  var load_firebase_auth = function(This, options) {\n    return new Promise(function(resolve, reject) {\n      if (typeof utilities.get(window, 'firebase.auth', undefined) !== 'undefined') {\n        return resolve();\n      }\n      if (options.libraries.firebase_auth.enabled == true) {\n        require.ensure([], function() {\n          require('firebase/auth');\n          This.log('Loaded Firebase Auth.');\n        }, 'firebase-auth')\n        .then(function() {\n          // firebase.auth().onAuthStateChanged(function(user) {\n          // })\n          return resolve();\n        })\n        .catch(function(e) {\n          This.properties.page.libErrors.push({name: 'firebase_auth', error: e})\n          return reject(e);\n        });\n      } else {\n        return resolve();\n      }\n\n    });\n  }\n\n\n  var load_firebase_firestore = function(This, options) {\n    return new Promise(function(resolve, reject) {\n      if (typeof utilities.get(window, 'firebase.firestore', undefined) !== 'undefined') {\n        return resolve();\n      }\n      if (options.libraries.firebase_firestore.enabled == true) {\n        require.ensure([], function() {\n          require('firebase/firestore');\n          This.log('Loaded Firestore.');\n        }, 'firebase-firestore')\n        .then(function() {\n          return resolve();\n        })\n        .catch(function(e) {\n          This.properties.page.libErrors.push({name: 'firebase_firestore', error: e})\n          return reject(e);\n        });\n      } else {\n        return resolve();\n      }\n    });\n  }\n\n  var load_firebase_messaging = function(This, options) {\n    return new Promise(function(resolve, reject) {\n      if (typeof utilities.get(window, 'firebase.messaging', undefined) !== 'undefined') {\n        return resolve();\n      }\n      if (options.libraries.firebase_messaging.enabled == true) {\n        require.ensure([], function() {\n          require('firebase/messaging');\n          This.log('Loaded Firebase Messaging.');\n        }, 'firebase-messaging')\n        .then(function() {\n          return resolve();\n        })\n        .catch(function(e) {\n          This.properties.page.libErrors.push({name: 'firebase_messaging', error: e})\n          return reject(e);\n        });\n      } else {\n        return resolve();\n      }\n    });\n  }\n\n\n  var load_lazysizes = function(This, options) {\n    return new Promise(function(resolve, reject) {\n      if (typeof window.lazysizes !== 'undefined') {\n        return resolve();\n      }\n      if (options.libraries.lazysizes.enabled == true) {\n        require.ensure([], function() {\n          window.lazysizes = require('lazysizes');\n\n          // configs come from official lazysizes demo\n          var expand = Math.max(Math.min(document.documentElement.clientWidth, document.documentElement.clientHeight, 1222) - 1, 359);\n          window.lazySizesConfig = {\n            loadMode: 1,\n            expand: expand,\n            expFactor: expand < 380 ? 3 : 2,\n          };\n          This.log('Loaded Lazysizes.');\n        }, 'lazysizes')\n        .then(function() {\n          return resolve();\n        })\n        .catch(function(e) {\n          This.properties.page.libErrors.push({name: 'lazysizes', error: e})\n          return reject(e);\n        });\n      } else {\n        return resolve();\n      }\n    });\n  }\n\n  var load_cookieconsent = function(This, options) {\n    return new Promise(function(resolve, reject) {\n      if (typeof window.cookieconsent !== 'undefined') {\n        return resolve();\n      }\n      if (options.libraries.cookieconsent.enabled == true) {\n        require.ensure([], function() {\n          require('cookieconsent');\n          window.cookieconsent.initialise(options.libraries.cookieconsent.config);\n          This.log('Loaded Cookieconsent.');\n        }, 'cookieconsent')\n        .then(function() {\n          return resolve();\n        })\n        .catch(function(e) {\n          This.properties.page.libErrors.push({name: 'cookieconsent', error: e})\n          return reject(e);\n        });\n      } else {\n        return resolve();\n      }\n\n    });\n  }\n\n  var load_tawk = function(This, options) {\n    var dom = This.dom();\n    return new Promise(function(resolve, reject) {\n      if (typeof window.Tawk_API !== 'undefined') {\n        return resolve();\n      }\n      if (options.libraries.tawk.enabled == true) {\n        window.Tawk_API = window.Tawk_API || {}, window.Tawk_LoadStart = new Date();\n        window.Tawk_API.onLoad = function(){\n          dom.select('#prechat-btn').hide();\n          Tawk_API.maximize();\n        };\n        dom.loadScript({src: 'https://embed.tawk.to/' + utilities.get(options, 'libraries.tawk.config.chatId', '') + '/default', crossorigin: true}, function(e) {\n          if (e) {\n            This.properties.page.libErrors.push({name: 'tawk', error: e})\n            return reject(e);\n          }\n          This.log('Loaded tawk.');\n          return resolve();\n        })\n\n      } else {\n        return resolve();\n      }\n    });\n  }\n\n  var load_sentry = function(This, options) {\n    return new Promise(function(resolve) {\n      if (typeof window.Sentry !== 'undefined') {\n        return resolve();\n      }\n      if (options.libraries.sentry.enabled == true) {\n        require.ensure([], function() {\n          window.Sentry = require('@sentry/browser');\n          var config = options.libraries.sentry.config;\n          config.release = config.release + '@' + This.properties.global.version;\n          config.environment = This.properties.meta.environment;\n          Sentry.init(config);\n          This.log('Loaded Sentry.');\n          // This.log('Loaded @sentry/browser.', config);\n        }, '@sentry/browser')\n        .then(function() {\n          return resolve();\n        })\n        .catch(function(e) {\n          This.properties.page.libErrors.push({name: 'sentry', error: e})\n          return reject(e);\n        });\n      } else {\n        return resolve();\n      }\n    });\n  }\n\n  Manager.prototype.log = function() {\n    try {\n      if (this.properties.meta.environment == 'development') {\n        // 1. Convert args to a normal array\n        var args = Array.prototype.slice.call(arguments);\n\n        // 2. Prepend log prefix log string\n        args.unshift('[DEV LOG]');\n\n        // 3. Pass along arguments to console.log\n        if (args[1] == 'error') {\n          args.splice(1,1);\n          console.error.apply(console, args);\n        } else if (args[1] == 'warn') {\n          args.splice(1,1);\n          console.warn.apply(console, args);\n        } else if (args[1] == 'log') {\n          args.splice(1,1);\n          console.log.apply(console, args);\n        } else {\n          console.log.apply(console, args);\n        }\n      }\n    } catch (e) {\n      console.log(args);\n    }\n  }\n\n  // Manager.prototype.time = function(mode, name) {\n  //   console.log('&&& called time ', mode, name);\n  //   if (this.properties.meta.environment == 'development') {\n  //     if (mode == 'start') {\n  //       console.time(name);\n  //     } else {\n  //       console.timeEnd(name);\n  //     }\n  //   }\n  // }\n\n  function init_loadPolyfills(This, configuration, cb) {\n    // console.log('POLY TEST', document.querySelectorAll);\n    // https://github.com/jquintozamora/polyfill-io-feature-detection/blob/master/index.js\n    var featuresDefault = (\n      // (typeof Promise !== \"undefined\" && Promise.toString().indexOf(\"[native code]\")) &&\n      'Promise' in window &&\n      Element.prototype.matches &&\n      // 'startsWith' in String.prototype &&\n      // 'endsWith' in String.prototype &&\n\n      'includes' in Array.prototype &&\n      'forEach' in Array.prototype &&\n      'isArray' in Array &&\n\n      'assign' in Object &&\n      'keys' in Object &&\n\n      'stringify' in JSON &&\n      'parse' in JSON &&\n\n      document.querySelectorAll &&\n      document.querySelector &&\n\n      'IntersectionObserver' in window &&\n      'IntersectionObserverEntry' in window &&\n      'intersectionRatio' in window.IntersectionObserverEntry.prototype &&\n      // (\n      // !('IntersectionObserver' in window) ||\n      // !('IntersectionObserverEntry' in window) ||\n      // !('intersectionRatio' in window.IntersectionObserverEntry.prototype)\n      // ) &&\n\n      'HTMLPictureElement' in window &&\n      'createEvent' in document &&\n      'addEventListener' in window &&\n      'localStorage' in window &&\n\n      true\n    )\n    var featuresCustom = true;\n    // for (var i = 0; i < options_user.initChecks.features.length; i++) {\n    //   array[i]\n    // }\n\n    if (featuresDefault && featuresCustom) {\n      cb();\n    } else {\n      This.dom().loadScript({src: 'https://polyfill.io/v3/polyfill.min.js?flags=always%2Cgated&features=default'}, function() {\n        // console.log('%cLoaded polyfill.io.', 'font-weight: bold');\n        This.log('Loaded polyfill.io')\n        cb();\n      });\n    }\n\n  }\n\n  /**\n  * UTILITIES\n  */\n  Manager.prototype.utilities = function() {\n    return utilities;\n  }\n\n  /**\n  * STORAGE\n  */\n  Manager.prototype.storage = function() {\n    return storage;\n  }\n\n  /**\n  * QUERIES\n  */\n  Manager.prototype.query = function() {\n    return query;\n  }\n\n  /**\n  * DOM OPERATIONS\n  */\n  Manager.prototype.dom = function() {\n    return dom;\n  }\n  Manager.prototype.ajax = function() {\n    return ajax;\n  }\n\n  /**\n  * OTHER\n  */\n  // Manager.prototype.performance = function() {\n  //   var supported = ('performance' in window);\n  //   return {\n  //     mark: function(mark) {\n  //       if (!supported) {return};\n  //       window.performance.mark(mark);\n  //     }\n  //   }\n  // }\n  Manager.prototype.performance = function() {\n    return {\n      mark: function(mark) {\n        try {\n          window.performance.mark(mark);\n        } catch (e) {\n        }\n      }\n    }\n  }\n\n  // Manager.prototype.performance = function() {\n  //   var This = this;\n  //\n  //   return {\n  //     mark2: function () {\n  //       return firebaseActive ? !!firebase.auth().currentUser : false;\n  //     },\n  //\n  //   }\n  // }\n\n\n  /**\n  * HELPERS\n  */\n\n\nmodule.exports = Manager;\n","/*\n  https://ultimatecourses.com/blog/writing-a-standalone-ajax-xhr-javascript-micro-library\n  https://plainjs.com/javascript/ajax/send-ajax-get-and-post-requests-47/\n  https://blog.garstasio.com/you-dont-need-jquery/ajax/\n  https://gomakethings.com/ajax-and-apis-with-vanilla-javascript/\n  https://gist.github.com/sgnl/bd760187214681cdb6dd\n*/\n\nfunction Ajax(reqObj) {\n  this.request = reqObj;\n}\n\nvar parse = function (req) {\n  var result;\n  try {\n    result = JSON.parse(req.responseText);\n  } catch (e) {\n    result = req.responseText;\n  }\n  return [result, req];\n};\n\nAjax.request = function(options) {\n  options = options || {};\n  options.method = (options.method || 'POST').toUpperCase();\n  // options.contentType = options.contentType || 'application/x-www-form-urlencoded; charset=UTF-8';\n  options.contentType = options.contentType || 'application/json; charset=utf-8';\n  // options.responseType = options.responseType || 'json';\n  options.accept = options.accept || 'application/json, text/javascript, */*; q=0.01';\n  // options.responseType = options.responseType.toLowerCase();\n  options.data = options.data || {};\n\n  if (!options.url) {\n    return;\n  }\n\n  var methods = {\n    success: function () {},\n    error: function () {},\n    always: function () {}\n  };\n  var XHR = window.XMLHttpRequest || XMLHttpRequest || ActiveXObject;\n  var request = new XHR('MSXML2.XMLHTTP.3.0');\n\n  request.open(options.method, options.url, true);\n  request.setRequestHeader('Content-type', options.contentType);\n  request.setRequestHeader('Accept', options.accept);\n  // var req;\n  request.onreadystatechange = function () {\n    var req;\n    if (request.readyState === 4) {\n      req = parse(request);\n      if (request.status >= 200 && request.status < 300) {\n        methods.success.call(methods, request, request.status, req[0]);\n      } else {\n        methods.error.call(methods, request, request.status, request.statusText);\n      }\n      methods.always.call(methods, request, request.status);\n\n    }\n  };\n  if ((options.contentType.indexOf('json') > -1)) {\n    try {\n      options.data = JSON.stringify(options.data);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  request.send(options.data);\n  var atomXHR = {\n    success: function (callback) {\n      methods.success = callback;\n      return atomXHR;\n    },\n    error: function (callback) {\n      methods.error = callback;\n      return atomXHR;\n    },\n    always: function (callback) {\n      methods.always = callback;\n      return atomXHR;\n    }\n  };\n\n  return atomXHR;\n\n}\n\n// Ajax.prototype.success = function(fn) {\n//   const reqObj = Object.assign({}, this.request);\n//   if (this.request.status >= 200 && this.request.status < 300) {\n//     fn(this.request.req, this.request.status, this.request.req);\n//   }\n//   return new Ajax(reqObj);\n// };\n//\n// Ajax.prototype.error = function(fn) {\n//   const reqObj = Object.assign({}, this.request);\n//   if (this.request.status < 200 || this.request.status >= 300) {\n//     fn(this.request.req, this.request.status, this.request.req);\n//   }\n//   return new Ajax(reqObj);\n// };\n//\n// Ajax.prototype.always = function(fn) {\n//   const reqObj = Object.assign({}, this.request);\n//   fn(this.request.req, this.request.status);\n//   return new Ajax(reqObj);\n// };\n\nmodule.exports = Ajax;\n","/*\nhttps://gist.github.com/joyrexus/7307312\n\nJQUERY vs vanilla\nhttps://github.com/nefe/You-Dont-Need-jDom#dom-manipulation\n\nqueryselector polyfill\nhttps://gist.github.com/chrisjlee/8960575\n* https://github.com/mtsyganov/queryselector-polyfill/blob/master/index.js\n\n*/\n\n\nfunction Dom(elObj) {\n  this.elements = elObj;\n}\n\nfunction _forEach(array, callback, scope) {\n  for (var i = 0; i < array.length; i++) {\n    callback.call(scope, i, array[i]); // passes back stuff we need\n  }\n};\n\nDom.prototype.addClass = function(name) {\n  var elsObj = Object.assign({}, this.elements);\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    element.classList.add(name);\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.removeClass = function(name) {\n  var elsObj = Object.assign({}, this.elements);\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    element.classList.remove(name);\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.css = function(ops) {\n  var elsObj = Object.assign({}, this.elements);\n  var keys = Object.keys(ops);\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    for (var i = 0; i < keys.length; i++) {\n      element.style[keys[i]] = ops[keys[i]];\n    }\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.hide = function(options) {\n  var elsObj = Object.assign({}, this.elements);\n  options = options || {};\n  options.type = options.type || 'display' /* display, visibility, both*/\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    if (options.type == 'visibility') {\n      element.style.visibility = 'hidden';\n    } else if (options.type == 'display') {\n      element.style.display = 'none';\n      element.setAttribute('hidden', true);\n      element.classList.add('hidden');\n    } else {\n      element.style.visibility = 'hidden';\n      element.style.display = 'none';\n      element.setAttribute('hidden', true);\n      element.classList.add('hidden');\n\n    }\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.show = function(options) {\n  var elsObj = Object.assign({}, this.elements);\n  options = options || {};\n  options.type = options.type || 'display' /* display, visibility, both*/\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    if (options.type == 'visibility') {\n      element.style.visibility = 'visible';\n    } else if (options.type == 'display') {\n      element.style.display = 'block';\n      // element.setAttribute('hidden', false);\n      element.removeAttribute('hidden');\n      element.classList.remove('hidden');\n    } else {\n      element.style.visibility = 'visible';\n      element.style.display = 'block';\n      // element.setAttribute('hidden', false);\n      element.removeAttribute('hidden');\n      element.classList.remove('hidden');\n    }\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.getAttribute = function(name, options) {\n  var elsObj = Object.assign({}, this.elements);\n  options = options || {};\n  var r;\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    r = element.getAttribute(name);\n  }\n  return r;\n}\n\nDom.prototype.setAttribute = function(name, value, options) {\n  var elsObj = Object.assign({}, this.elements);\n  options = options || {};\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    element.setAttribute(name, value);\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.removeAttribute = function(name, options) {\n  var elsObj = Object.assign({}, this.elements);\n  options = options || {};\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    element.setAttribute(name, 'DELETE');\n    element.removeAttribute(name);\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.getValue = function(options) {\n  options = options || {};\n  options.returnType = options.returnType || 'array'; // array, object, single (only for checkbox)\n  var r;\n  var elsObj = Object.assign({}, this.elements);\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    if ((element.type == 'checkbox') ) {\n      if (elsObj.list.length == 1) {\n        r = element.checked;\n        break;\n      } else {\n        if (options.returnType == 'array') {\n          r = (r) ? r : [];\n          if (element.checked) {\n            r.push(element.value);\n          }\n        } else if (options.returnType == 'object') {\n          r = (r) ? r : {};\n          r[element.value] = element.checked;\n        } else {\n          r = element.checked\n        }\n      }\n    } else if (element.type == 'radio') {\n      if (element.checked) {\n        r = element.value;\n        break;\n      }\n    } else {\n      r = element.value;\n      break;\n    }\n  }\n  return r;\n}\n\nDom.prototype.setValue = function(value, options) {\n  options = options || {};\n  options.returnType = options.returnType || 'single';\n  var elsObj = Object.assign({}, this.elements);\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    if (element.type == 'checkbox') {\n      element.checked = !!value;\n    } else if (element.type == 'radio') {\n      element.checked = !!value;\n    } else {\n      element.value = value;\n    }\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.setInnerHTML = function(html, options) {\n  options = options || {};\n  var elsObj = Object.assign({}, this.elements);\n  // console.log('SET ', this);\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    element.innerHTML = html;\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.each = function(fn, options) {\n  options = options || {};\n  var elsObj = Object.assign({}, this.elements);\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    if (fn(i, element) === false) {\n      break;\n    };\n  }\n  return new Dom(elsObj);\n}\n\nDom.prototype.on = function(evt, fn) {\n  var elsObj = Object.assign({}, this.elements);\n  for (var i = 0; i < elsObj.count; i++) {\n    var element = elsObj.list[i];\n    if (!validate(element)) { continue; }\n    if (document.addEventListener) { // W3C model\n        element.addEventListener(evt, fn, false);\n        // return true;\n    } else if (document.attachEvent) { // Microsoft model\n        // return element.attachEvent('on' + evt, fn);\n        element.attachEvent('on' + evt, fn);\n    }\n  }\n  return new Dom(elsObj);\n};\n\nDom.prototype.get = function(index) {\n  return (index || 0 <= this.elements.count) ? this.elements.list[index || 0] : null;\n}\n\nDom.prototype.exists = function() {\n  return (this.elements.exists);\n}\n\nDom.loadScript = function(options, callback) {\n  options = options || {};\n  options.async = (typeof options.async === 'undefined') ? false : options.async;\n  options.crossorigin = (typeof options.crossorigin === 'undefined') ? false : options.crossorigin;\n  var s = document.createElement('script');\n  s.src = options.src;\n  s.async = options.async;\n  if (options.crossorigin) {\n    s.setAttribute('crossorigin','*');\n  }\n  s.onload = function() {\n    callback();\n  };\n  s.onerror = function() {\n    callback(new Error('Failed to load script ' + src));\n  };\n  document.head.appendChild(s);\n}\n\nDom.checkDOMContentLoaded = function(win, fn) {\n  var done = false, top = true,\n\n  doc = win.document,\n  root = doc.documentElement,\n  modern = doc.addEventListener,\n\n  add = modern ? 'addEventListener' : 'attachEvent',\n  rem = modern ? 'removeEventListener' : 'detachEvent',\n  pre = modern ? '' : 'on',\n\n  init = function(e) {\n    if (e.type == 'readystatechange' && doc.readyState != 'complete') return;\n    (e.type == 'load' ? win : doc)[rem](pre + e.type, init, false);\n    if (!done && (done = true)) fn.call(win, e.type || e);\n  },\n\n  poll = function() {\n    try { root.doScroll('left'); } catch(e) { setTimeout(poll, 50); return; }\n    init('poll');\n  };\n\n  if (doc.readyState == 'complete') fn.call(win, 'lazy');\n  else {\n    if (!modern && root.doScroll) {\n      try { top = !win.frameElement; } catch(e) { }\n      if (top) poll();\n    }\n    doc[add](pre + 'DOMContentLoaded', init, false);\n    doc[add](pre + 'readystatechange', init, false);\n    win[add](pre + 'load', init, false);\n  }\n\n}\n\n\n\n// Dom.on = function(fn) {\n//   var done = false, top = true,\n//   win = window,\n//   doc = win.document,\n//   root = doc.documentElement,\n//   modern = doc.addEventListener,\n//\n//   add = modern ? 'addEventListener' : 'attachEvent',\n//   rem = modern ? 'removeEventListener' : 'detachEvent',\n//   pre = modern ? '' : 'on',\n//\n//   init = function(e) {\n//     if (e.type == 'readystatechange' && doc.readyState != 'complete') return;\n//     (e.type == 'load' ? win : doc)[rem](pre + e.type, init, false);\n//     if (!done && (done = true)) fn.call(win, e.type || e);\n//   },\n//\n//   poll = function() {\n//     try { root.doScroll('left'); } catch(e) { setTimeout(poll, 50); return; }\n//     init('poll');\n//   };\n//\n//   if (doc.readyState == 'complete') fn.call(win, 'lazy');\n//   else {\n//     if (!modern && root.doScroll) {\n//       try { top = !win.frameElement; } catch(e) { }\n//       if (top) poll();\n//     }\n//     doc[add](pre + 'DOMContentLoaded', init, false);\n//     doc[add](pre + 'readystatechange', init, false);\n//     win[add](pre + 'load', init, false);\n//   }\n//\n// }\nfunction validate(element) {\n  return (element && element.tagName);\n}\nDom.select = function(selector, options) {\n  options = options || {};\n\n  // var elems = (typeof selector === 'string') ? document.querySelectorAll(selector) : [selector];\n  var elems;\n  var type = typeof selector;\n  // console.log('TYPEOF', type);\n  if (type == 'string') {\n    elems = document.querySelectorAll(selector);\n  } else if (type == 'object') {\n    elems = (selector.tagName) ? [selector] : selector;\n  }\n  var r = [];\n\n  _forEach(elems, function (index, value) {\n    r.push(value);\n  });\n\n  return new Dom({\n    // elements: {\n      list: r,\n      count: r.length,\n      exists: (r.length > 0),\n    // },\n  });\n}\n\nmodule.exports = Dom;\n","/*\n  https://github.com/medialize/URI.js/blob/gh-pages/src/URI.js\n\n  https://github.com/ljharb/qs\n  https://github.com/medialize/URI.js\n\n\n  static METHODS\n  https://stackoverflow.com/questions/1535631/static-variables-in-javascript\n\n*/\n\n// const polyfill = require('./polyfills.js');\n\nfunction Query(queryObj) {\n  this.query = queryObj;\n  constructQueryString(this);\n}\n\n\nQuery.prototype.set = function(name, value) {\n  var queryObj = Object.assign({}, this.query);\n  queryObj.constructed.parameters[name] = value;\n  queryObj.constructed.exists = (Object.keys(queryObj.constructed.parameters).length > 0);\n  return new Query(queryObj);\n}\n\nQuery.prototype.remove = function(name) {\n  var queryObj = Object.assign({}, this.query);\n  delete queryObj.constructed.parameters[name];\n  queryObj.constructed.exists = (Object.keys(queryObj.constructed.parameters).length > 0);\n  return new Query(queryObj);\n}\n\nQuery.prototype.removeAll = function(name) {\n  var queryObj = Object.assign({}, this.query);\n  queryObj.constructed.parameters = {};\n  queryObj.constructed.exists = false;\n  return new Query(queryObj);\n}\n\nQuery.prototype.get = function(name, def) {\n  // return new Query(this.query.constructed.parameters[name]);\n  return (this.query.constructed.parameters[name] || def);\n}\n\nQuery.prototype.getAll = function() {\n  // return new Query(this.query.constructed.parameters);\n  return (this.query.constructed.parameters);\n}\n\nQuery.prototype.getUrl = function() {\n  // return new Query(this.query.constructed.parameters[name]);\n  return (this.query.constructed.url);\n}\n\nQuery.prototype.exists = function() {\n  // return new Query(this.query.constructed.parameters[name]);\n  return (this.query.constructed.exists);\n}\n\n\nQuery.create = function(url, options) {\n  options = options || {};\n  options.decode = (typeof options.decode !== 'undefined') ? options.decode : true;\n  url = url.replace(/amp;/g,\"\");\n  url = (options.decode === true) ? decodeURIComponent(url) : url;\n  var urlPlain = url.split('?')[0] || url;\n  var t_params = getParameters(url);\n  return new Query({\n    original: {\n      url: url,\n      urlPlain: urlPlain,\n      options: options || {},\n    },\n    constructed: {\n      parameters: t_params,\n      url: '',\n      exists: (Object.keys(t_params).length > 0),\n    },\n  });\n}\n\nmodule.exports = Query;\n\nfunction getParameters(url) {\n  var params = {}, queries, temp, i, l;\n  // queries = url.split('?')[1].split('&') || [];\n  queries = url.split('?')[1];\n  queries = (queries) ? queries.split('&') : [];\n  for ( i = 0, l = queries.length; i < l; i++ ) {\n    temp = queries[i].split('=');\n    params[temp[0]] = temp[1];\n    // params[temp[0]] = (typeof temp[1] !== 'undefined') ? temp[1].replace(/\\+/g, ' ') : \"\";\n  };\n  return params;\n}\n\nfunction constructQueryString(obj) {\n  obj.query.constructed.url = obj.query.original.urlPlain;\n  var i = 0;\n  for (var key in obj.query.constructed.parameters) {\n    var url = obj.query.constructed.url;\n    var value = obj.query.constructed.parameters[key];\n    obj.query.constructed.url = url + (i == 0 ? '?' : '&') + key + '=' + value;\n    i++;\n  }\n}\n","/*\n*/\nvar utilities = require('./utilities.js');\nvar support;\n\nfunction Storage(storageObj) {\n  this.storage = storageObj;\n}\n\nStorage.get = function(path, def, options) {\n  var result;\n  path = path || '';\n  // def = def || undefined;\n  try {\n    // result = (typeof Storage !== 'undefined') ? utilities.get(JSON.parse(window.localStorage.getItem('managerRoot')) || {}, path, def) : def;\n    result = utilities.get(JSON.parse(window.localStorage.getItem('_manager')) || {}, path, def);\n  } catch (e) {\n    result = def;\n  }\n  return result;\n}\n\nStorage.set = function(path, value, options) {\n  // if (typeof Storage !== 'undefined') { return };\n  var existing;\n  try {\n    existing = Storage.get('', {});\n    utilities.set(existing, path, value);\n    window.localStorage.setItem('_manager', JSON.stringify(existing));\n  } catch (e) {\n\n  }\n  return existing;\n}\n\nStorage.clear = function(options) {\n  // options = options || {};\n  // options.type = options.type || 'manager';\n  // if (typeof Storage !== 'undefined') { return };\n  // if (options.type == 'manager') {\n  try {\n    window.localStorage.setItem('_manager', '{}');\n  } catch (e) {\n\n  }\n  // } else {\n  //   window.localStorage.clear();\n  // }\n}\n\nmodule.exports = Storage;\n","Manager.ready(function() {\n  Manager.log('app.js fired Manager.ready()');\n\n  // Add additional logic here!\n  // var theme = require('../theme/theme.js');\n\n});\n"],"sourceRoot":""}